<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="osfHYoungFFCWS">
<title>osf-demo-pipeline â€¢ osfHYoungFFCWS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="osf-demo-pipeline">
<meta property="og:description" content="osfHYoungFFCWS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">osfHYoungFFCWS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/osfHYoungFFCWS.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Data-simulation-and-parameter-recovery-with-brms.html">Data simulation and parameters recovery with brms</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>osf-demo-pipeline</h1>
            
      
      
      <div class="d-none name"><code>osfHYoungFFCWS.Rmd</code></div>
    </div>

    
    
<p>Below we provide an overview of the main functions from this package
that are used in the demonstration pipeline. To see the output of the
demonstration pipeline refer to this <a href="https://hugomell.github.io/osf-heloise-young-fragile-family/articles/Data-simulation-and-parameter-recovery-with-brms.html">article</a>.
Recall also from the instructions in the <a href="https://hugomell.github.io/osf-heloise-young-fragile-family/index.html">README</a>
that the files that define the <code>targets</code> pipeline can be
obtained with <code>osfHYoungFFCWS::gen_targets_script()</code>.</p>
<p>We start by loading the package into our R environment:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hugomell.github.io/osf-heloise-young-fragile-family/">osfHYoungFFCWS</a></span><span class="op">)</span></span></code></pre></div>
<p>The first step of the pipeline consists in simulating datasets with
all the variables used in each of the three types of path models
(baseline, mediation and moderation models).</p>
<p>The values used by default for the simulation are based on the
associations found between the variables of interest in previous
studies. They can be inspected with a call to
<code><a href="../reference/get_params_simu.html">get_params_simu()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_params_simu.html">get_params_simu</a></span><span class="op">(</span>model_type <span class="op">=</span> <span class="st">"&lt;baseline|mediation|moderation&gt;"</span><span class="op">)</span></span></code></pre></div>
<p>Overriding this default values can be achieved simply by providing a
new vector of values to the <code><a href="../reference/set_params_simu.html">set_params_simu()</a></code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_params_simu.html">set_params_simu</a></span><span class="op">(</span><span class="va">x</span>, model_type <span class="op">=</span> <span class="st">"&lt;baseline|mediation|moderation&gt;"</span><span class="op">)</span></span>
<span><span class="co"># here x is a numeric vector of length equal to the number of path coefficients</span></span>
<span><span class="co"># for the chosen type of model </span></span></code></pre></div>
<p>As an example, to change the strength of the association between
short-term deliberation and externalizing symptoms for the baseline
model to a new value of 0.45 (standardized coefficient), we would run
the following commands:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we first assign the default values to a new vector</span></span>
<span><span class="va">coeffs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_params_simu.html">get_params_simu</a></span><span class="op">(</span>model_type <span class="op">=</span> <span class="st">"baseline"</span><span class="op">)</span></span>
<span><span class="co"># we then modify the values for the relationship(s) of interest</span></span>
<span><span class="va">coeffs</span><span class="op">[</span><span class="st">"externalizing ~ std"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.45</span></span>
<span><span class="co"># we use the new list of coefficients to update the simulation parameters</span></span>
<span><span class="fu"><a href="../reference/set_params_simu.html">set_params_simu</a></span><span class="op">(</span><span class="va">coeffs</span>, model_type <span class="op">=</span> <span class="st">"baseline"</span><span class="op">)</span></span></code></pre></div>
<p>Generating datasets for specific path models using the default
package values or values set by the user can be done with the
<code><a href="../reference/simulate_dataset.html">simulate_dataset()</a></code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/simulate_dataset.html">simulate_dataset</a></span><span class="op">(</span>model_type <span class="op">=</span> <span class="st">"&lt;baseline|mediation|moderation&gt;"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>hist_sim(&lt;dataset&gt;)</code> function can be used to
quickly plot histograms for all the variables in the dataset.</p>
<p>Once we have simulated datasets, we can use the
<code><a href="../reference/brms_fit.html">brms_fit()</a></code> function to estimate the associated path models
with brms:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">brms_fit</span>(<span class="sc">&lt;</span>simulated dataset<span class="sc">&gt;</span>, <span class="at">model_type =</span> <span class="st">"&lt;baseline|mediation|moderation&gt;"</span>)</span></code></pre></div>
<p>With brms fit objects obtained, we can now check whether our bayesian
estimation procedure was able to recover the values used as simulation
parameters. This can be done by generating a table where each row
correspond to the path model coefficient for a given relationship and
the columns give respectively the mean of the posterior distribution and
the target value used for the simulation. The function
<code><a href="../reference/check_params_recovery.html">check_params_recovery()</a></code> will produce such a table:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">check_params_recovery</span>(<span class="sc">&lt;</span>model fit<span class="sc">&gt;</span>, <span class="at">model_type =</span> <span class="st">"&lt;baseline|mediation|moderation&gt;"</span>) <span class="sc">|&gt;</span></span></code></pre></div>
<p>However, richer information can be obtained by plotting the full
posterior distributions for all the relationships estimated in the path
model. For instance, to assess the parameter recovery for the mediation
model, we would run the following commands:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># %#% Mediation model</span></span>
<span></span>
<span><span class="co"># posterior distributions for the predictors of short-term deliberation</span></span>
<span><span class="fu"><a href="../reference/plot_posteriors.html">plot_posteriors</a></span><span class="op">(</span><span class="va">mod_mediation</span>, <span class="st">"std"</span>, model_type <span class="op">=</span> <span class="st">"mediation"</span>,</span>
<span>    plot_title <span class="op">=</span> <span class="st">"Mediation model - predictors of short-term deliberation"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># posterior distributions for the predictors of reproductive efforts</span></span>
<span><span class="fu"><a href="../reference/plot_posteriors.html">plot_posteriors</a></span><span class="op">(</span><span class="va">mod_mediation</span>, <span class="st">"repro"</span>, model_type <span class="op">=</span> <span class="st">"mediation"</span>,</span>
<span>    plot_title <span class="op">=</span> <span class="st">"Mediation model - predictors of reproductive effort"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># posterior distributions for the predictors of internalizing symptoms</span></span>
<span><span class="fu"><a href="../reference/plot_posteriors.html">plot_posteriors</a></span><span class="op">(</span><span class="va">mod_mediation</span>, <span class="st">"internalizing"</span>, model_type <span class="op">=</span> <span class="st">"mediation"</span>,</span>
<span>    plot_title <span class="op">=</span> <span class="st">"Mediation model - predictors of internalizing symptoms"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># posterior distributions for the predictors of externalizing symptoms</span></span>
<span><span class="fu"><a href="../reference/plot_posteriors.html">plot_posteriors</a></span><span class="op">(</span><span class="va">mod_mediation</span>, <span class="st">"externalizing"</span>, model_type <span class="op">=</span> <span class="st">"mediation"</span>,</span>
<span>    plot_title <span class="op">=</span> <span class="st">"Mediation model - predictors of externalizing symptoms"</span><span class="op">)</span></span></code></pre></div>
<p>The graphs created by <code><a href="../reference/plot_posteriors.html">plot_posteriors()</a></code> will show in
addition to the posterior distribution the target value used in the
simulation as a vertical line, as well as the mean of the posterior
(black dot), 66% and 95% credible intervals (black horizontal segments).
See the <a href="https://hugomell.github.io/osf-heloise-young-fragile-family/articles/Data-simulation-and-parameter-recovery-with-brms.html">article</a>
with the output of the demonstration pipeline for examples.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Hugo Mell.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
