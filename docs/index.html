<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Demonstration pipeline for the main analyses described in the OSF pre-registration TITLE (LINK). It includes the simulation of data and and parameter recovery through bayesian estimation of linear models.">
<title>Reproducible Analytical Pipeline Demonstration For OSF Pre-registration â€¢ osfHYoungFFCWS</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Reproducible Analytical Pipeline Demonstration For OSF Pre-registration">
<meta property="og:description" content="Demonstration pipeline for the main analyses described in the OSF pre-registration TITLE (LINK). It includes the simulation of data and and parameter recovery through bayesian estimation of linear models.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">osfHYoungFFCWS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/osfHYoungFFCWS.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/Data-simulation-and-parameter-recovery-with-brms.html">Data simulation and parameters recovery with brms</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="code-and-dependencies-to-run-the-demonstration-pipeline">Code and dependencies to run the demonstration pipeline<a class="anchor" aria-label="anchor" href="#code-and-dependencies-to-run-the-demonstration-pipeline"></a>
</h1></div>
<p>This repository is a companion to an <a href="https://osf.io/nck3m/" class="external-link">OSF pre-registration</a>. It is organized as an R package and can be installed with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"hugomell/osfHYoungFFCWS"</span>, dependencies <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>It provides R code and instructions to run a demonstration pipeline that (i) simulates fake datasets based on the equations described for the three main models in the pre-registration, (ii) attempts to recover the structural parameters used for the simulation by estimating path models with <a href="https://github.com/paul-buerkner/brms" class="external-link">brms</a>. Tables and plots obtained after running the demonstration pipeline can be found <a href="/articles/Data-simulation-and-parameter-recovery-with-brms.html">here</a>.</p>
<p>To ensure that the analysis pipeline is <strong><em>reproducible</em></strong>, we detail in the next sections how to: (i) set up the computing environment with all the required dependencies, and (ii) run the demonstration pipeline.</p>
<div class="section level2">
<h2 id="setting-up-the-computing-environment">Setting up the computing environment<a class="anchor" aria-label="anchor" href="#setting-up-the-computing-environment"></a>
</h2>
<p>Two strategies are proposed to get all required dependencies up and running on a new machine. The first strategy uses a container image to generate on demand <em>virtualized</em> computing environments isolated from the rest of the host machine and with all the tools necessary to run the pipeline pre-installed. The second strategy uses <a href="https://rstudio.github.io/renv/articles/renv.html" class="external-link"><code>{renv}</code></a> to create a project local library with the appropriate versions of the R dependencies.</p>
<p>The second strategy is less reproducible since the R installation and the system dependencies will need to be managed by the user. For instance, the installation of the <code>Stan</code> probabilistic programming language used by <a href="https://github.com/paul-buerkner/brms" class="external-link">brms</a> to fit path models using bayesian estimation procedures is not recorded by <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> and will need to be performed in a separate step. Nevertheless, it has the advantage that it does not require the installation and use of specialized software for launching and managing containers, which might not be familiar to certain R users.</p>
<div class="section level3">
<h3 id="using-the-container-image">Using the container image<a class="anchor" aria-label="anchor" href="#using-the-container-image"></a>
</h3>
<p>First, you will need a machine with <a href="https://podman.io/" class="external-link">Podman</a> installed (<a href="https://www.docker.com/" class="external-link">Docker</a> might also work but has not been properly tested). Instructions for the installation of Podman on various platforms can be found in their official <a href="https://podman.io/docs/installation" class="external-link">documentation</a>.</p>
<p>In a terminal, you can then execute the following podman command which will <em>pull</em> the container image on your local machine:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">podman</span> pull docker.io/ipea7892/osf-hyoung-ffcws-dev:latest </span></code></pre></div>
<p>Once the image has been downloaded, to launch a container:</p>
<ol style="list-style-type: decimal">
<li><p>Open a terminal in your project directory</p></li>
<li><p>Copy/paste the following command in the terminal:</p></li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">podman</span> run <span class="at">--rm</span> <span class="at">-it</span> <span class="at">-e</span> DISABLE_AUTH=true <span class="at">-p</span> 127.0.0.1:8787:8787 <span class="dt">\</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>       <span class="at">-v</span> <span class="st">"</span><span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span><span class="st">"</span>:/home/root/project <span class="st">"osf-hyoung-ffcws-dev:latest"</span></span></code></pre></div>
<p>This will create a container based on the container image you just pulled and will automatically start an RStudio server session from within the container.</p>
<ol start="3" style="list-style-type: decimal">
<li>
<p>Open a web browser and type <code>localhost:8787</code> in your address bar.</p>
<p>Now you will be connected to the RStudio session that is running from the container. You will have access to the files in your project directory and to all the packages used by the demonstration pipeline.</p>
</li>
</ol>
<p>To stop the container press <code>Ctrl-c</code> in the terminal to close the RStudio session and type <code>exit</code> to leave and destroy the running container.</p>
</div>
<div class="section level3">
<h3 id="using-renv">Using <code>{renv}</code>
<a class="anchor" aria-label="anchor" href="#using-renv"></a>
</h3>
</div>
<div class="section level3">
<h3 id="restoring-r-dependencies">Restoring R dependencies<a class="anchor" aria-label="anchor" href="#restoring-r-dependencies"></a>
</h3>
<p>First, you need to copy the <code>renv.lock</code> located at the root of the github <a href="https://github.com/hugomell/osf-heloise-young-fragile-family" class="external-link">repository</a> to your project folder. This is the file used by <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> to record the exact versions of the R dependencies that need to be present to execute the code for the project.</p>
<p>If you do not already have <code>renv</code> installed on your machine, run <code>install.packages("renv")</code>.</p>
<p>Then, to restore the computing environment run <code><a href="https://rstudio.github.io/renv/reference/init.html" class="external-link">renv::init()</a></code> and select the <code>Restore the project from the lockfile</code> option. This will install all the necessary R packages in a new <code>renv/</code> folder at the root of your project.</p>
<p>Now, the next time we open RStudio or an R console from the root of our project directory the <code>renv</code> environment will be automatically loaded and all the packages should be available.</p>
</div>
</div>
<div class="section level2">
<h2 id="running-the-demonstration-pipeline">Running the demonstration pipeline<a class="anchor" aria-label="anchor" href="#running-the-demonstration-pipeline"></a>
</h2>
<p>The analysis pipeline is managed using the R package <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a>.</p>
<p>To execute the pipeline on your machine, you first need to run <code>osfHYoungFFCWS::get_targets_files()</code> from an R environnement with our package installed. This will copy two files to the root of your working directory: <code>_targets.R</code> and <code>Data-simulation-and-parameter-recovery-with-brms.Rmd</code>. The former defines all the steps of our pipeline and the later is an R Markdown file used to generate an HTML report with tables and plots.</p>
<p>Then, simply execute <code><a href="https://docs.ropensci.org/targets/reference/tar_make.html" class="external-link">targets::tar_make()</a></code> which will run the pipeline. This command will create at the root of the working directory a <code>_targets/</code> folder used internally by <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a> to store the results of the computations. A <code>Data-simulation-and-parameter-recovery-with-brms.html</code> should also have been generated automatically from the R Markdown file. The same report is available as a <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a> <a href="https://hugomell.github.io/osf-heloise-young-fragile-family/articles/Data-simulation-and-parameter-recovery-with-brms.html" class="external-link">article</a>.</p>
<p>See the <a href="https://hugomell.github.io/osf-heloise-young-fragile-family/articles/osfHYoungFFCWS.html" class="external-link">Getting started</a> as well as the <a href="https://hugomell.github.io/osf-heloise-young-fragile-family/reference/index.html" class="external-link">Reference</a> sections for more information on the functions used in the pipeline and ways to modify the default values for the simulation parameters and the modelsâ€™ priors.</p>
<p>To learn more about managing R pipelines with <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a>, you can refer to the packageâ€™s <a href="https://books.ropensci.org/targets/" class="external-link">User Guide</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing osfHYoungFFCWS</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Hugo Mell <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2346-1008" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugo Mell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
